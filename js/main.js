gsap.registerPlugin(ScrollTrigger);let locoScroll,pageId,WORK,rect,workPos,mRg,BOTTOM,Rect,bottomPos,mrg,lastCursorX=window.innerWidth/2,lastCursorY=window.innerHeight/2;const body=document.body,select=e=>document.querySelector(e),selectAll=e=>document.querySelectorAll(e),loader=select(".js-loader"),loaderInner=select("#js-loader__inner"),progressBar=select(".js-loader__progress"),loaderMask=select(".js-loader__mask");function pageTransitionIn({container:e}){let t=gsap.timeline({defaults:{duration:1,ease:"power2.inOut"}});return t.fromTo(loader,{yPercent:-100},{yPercent:0}).fromTo(loaderMask,{yPercent:80},{yPercent:0},0).to(e,{y:150},0),t}function pageTransitionOut({container:e}){let t=gsap.timeline({defaults:{duration:1,ease:"power2.inOut"},onComplete:()=>initScript()});return t.to(loader,{yPercent:100}).to(loaderMask,{yPercent:-80},0).from(e,{y:-150},0),t}function initPageTransitions(){function e(e){(locoScroll=new LocomotiveScroll({el:e.querySelector("[data-scroll-container]"),smooth:!0,inertia:.8,tablet:{smooth:0,breakpoint:0,direction:"vertical",gestureDirection:"vertical"},smartphone:{smooth:0,breakpoint:0,direction:"vertical",gestureDirection:"vertical"},multiplier:.7})).on("scroll",ScrollTrigger.update),ScrollTrigger.scrollerProxy("[data-scroll-container]",{scrollTop(e){return arguments.length?locoScroll.scrollTo(e,0,0):locoScroll.scroll.instance.scroll.y},getBoundingClientRect:()=>({top:0,left:0,width:window.innerWidth,height:window.innerHeight}),pinType:e.querySelector("[data-scroll-container]").style.transform?"transform":"fixed"});let t=selectAll(".c-scrollbar");t.length>1&&t[0].remove(),ScrollTrigger.addEventListener("refresh",()=>locoScroll.update()),ScrollTrigger.refresh()}barba.hooks.before(()=>{select("html").classList.add("is-transitioning")}),barba.hooks.after(()=>{select("html").classList.remove("is-transitioning"),locoScroll.update()}),barba.hooks.enter(()=>{window.scrollTo(0,0)}),barba.init({sync:!0,timeout:7e3,transitions:[{name:"overlay-transition",once(t){e(t.next.container),pageId=t.next.namespace,main_script(),preloader_move(),"home"==pageId?(locoScroll.stop(),workPos=(rect=(WORK=document.querySelector("#work")).getBoundingClientRect()).top,mRg=2.29*window.innerWidth/100,initLoader(t.next.namespace),first_load_home()):(bottomPos=(Rect=(BOTTOM=document.querySelector("#bottom-work")).getBoundingClientRect()).top,mrg=2.29*window.innerWidth/100,initLoader(t.next.namespace))},async leave(e){pageTransitionIn(e.current),await delay(6e3),e.current.container.remove()},async enter(e){pageTransitionOut(e.next)},async beforeEnter(t){ScrollTrigger.getAll().forEach(e=>e.kill()),locoScroll.destroy(),e(t.next.container),main_script(),"home"==(pageId=t.next.namespace)?(workPos=(rect=(WORK=document.querySelector("#work")).getBoundingClientRect()).top,mRg=2.29*window.innerWidth/100):(bottomPos=(Rect=(BOTTOM=document.querySelector("#bottom-work")).getBoundingClientRect()).top,mrg=2.29*window.innerWidth/100)}}]})}function initLoader(){gsap.set(loader,{yPercent:-100}),initScript();let e=gsap.timeline({id:"tlLoaderOut",defaults:{duration:1.2,ease:"power2.inOut"},delay:1});if(e.from(".site-main",{y:150},.2),"home"!=pageId){let t=gsap.timeline();t.add(e)}}function delay(e){return e=e||2e3,new Promise(t=>{setTimeout(()=>{t()},e)})}function initScript(){select("body").classList.remove("is-loading"),"home"==pageId?home_script():sub_script()}gsap.set(loader,{autoAlpha:1}),initPageTransitions(),CustomEase.create("customEase",".3,.86,.36,.95"),CustomEase.create("strongEase",".9,0,.1,1");const tll=gsap.timeline({paused:"true",onComplete(){delay(500),locoScroll.start()}});tll.to("#percent",{duration:.35,color:"#99FF00",ease:"strongEase",delay:.5}),tll.to("#percent",{duration:.35,ease:"strongEase",scale:0,opacity:0,delay:.5}),tll.to("#hi",{opacity:1,duration:.5,ease:"customEase"}),tll.to("#hi",{opacity:0,duration:.5,ease:"customEase",delay:.5}),tll.to("#imntq",{opacity:1,duration:.5,ease:"customEase"}),tll.to("#imntq",{opacity:0,duration:.5,ease:"customEase",delay:.5}),tll.to("#preloader",{duration:1,ease:"customEase",height:"0%"});var id,width=0;function preloader_move(){id=setInterval(frame,65)}function frame(){width>=100?(clearInterval(id),tll.play()):(width++,document.getElementById("percent").innerHTML=width)}function first_load_home(){SplitType.create(".text-lines",{types:"lines"}),gsap.set("#menu-link span, #logo img",{y:"-100% - 2.29vw",opacity:0}),gsap.set("#bottomleft, #bottomright",{y:"5.49vw",opacity:0}),gsap.set(".behind-dp",{opacity:0}),tll.from(".text-lines .line",{y:"100%",opacity:0,duration:.75,stagger:.2}),tll.to(".behind-dp",{opacity:1,duration:0}),tll.to("nav ul span, #logo img",{y:"0%",opacity:1,duration:.7,ease:"customEase",delay:-.75}),tll.to("#bottomleft, #bottomright",{y:"0%",opacity:1,duration:.7,ease:"customEase",delay:-.5})}function tilt_effect(){VanillaTilt.init(document.querySelectorAll(".bigtilt"),{max:20,scale:1.1,speed:1500})}function ntq_scale(){gsap.to("#ntq",{scale:.6,transformOrigin:"50% 50%",scrollTrigger:{scroller:"[data-scroll-container]",trigger:"#ntq",start:"top 5%",scrub:!0}})}function text_reveal(){let e=document.querySelector(".text-reveal-1"),t=Splitting({target:e,by:"lines"}),o=document.querySelector(".text-reveal-2"),r=Splitting({target:o,by:"lines"});t[0].lines.forEach(e=>{gsap.from(e,{opacity:0,y:"100%",ease:"power4.out",scrollTrigger:{scroller:"[data-scroll-container]",trigger:e,start:"top 90%",end:"top 65%",scrub:!0}})}),r[0].lines.forEach(e=>{gsap.from(e,{opacity:0,y:"100%",ease:"power4.out",scrollTrigger:{scroller:"[data-scroll-container]",trigger:e,start:"top 80%",end:"top 40%",scrub:!0}})})}function project_color(){$(".project").hover(function(){var e=$(this).attr("data-color");$("#container").css("background",e)}),$(".project").mouseleave(function(){$("#container").css("background","#08060A")})}function image_hover(){let e=document.querySelectorAll(".project-images img"),t={x:window.innerWidth/2,y:window.innerHeight/2},o={x:t.x,y:t.y},r=gsap.quickSetter(e,"x","px"),l=gsap.quickSetter(e,"y","px");window.addEventListener("mousemove",e=>{o.x=e.clientX-mRg,o.y=e.clientY+locoScroll.scroll.instance.scroll.y-workPos});var n=0,a=0;gsap.ticker.add(()=>{let e=1-Math.pow(.92,gsap.ticker.deltaRatio());t.x+=(o.x-t.x-n)*e,t.y+=(o.y-t.y-a)*e,r(t.x),l(t.y)}),gsap.utils.toArray("#work a").forEach(e=>{let{label:t}=e.dataset;e.addEventListener("mouseenter",()=>{n=$(`img[alt=${t}]`).width()/2,a=$(`img[alt=${t}]`).height()/2,gsap.to(`img[alt=${t}]`,{opacity:1,scale:1}),gsap.set(`img[alt=${t}]`,{zIndex:4}),gsap.set(`a[data-label=${t}]`,{zIndex:5})}),e.addEventListener("mouseleave",()=>{gsap.to(`img[alt=${t}]`,{opacity:0,zIndex:-1,scale:.5}),gsap.set(`a[data-label=${t}]`,{zIndex:0})})})}function item_lines(){gsap.utils.toArray("#work .project-lines").forEach(e=>{gsap.from(e,{transformOrigin:"0%",scaleX:0,scrollTrigger:{scroller:"[data-scroll-container]",trigger:e,start:"top bottom",end:"top 33.33%",scrub:!0}})})}function our_dream(){gsap.from("#our-dream",{y:"100%",ease:"customEase",duration:1,scrollTrigger:{scroller:"[data-scroll-container]",trigger:"#our-dream",start:"top 85%",toggleActions:"restart none none reverse"}})}function main_script(){custom_cursor(),tilt_effect()}function home_script(){ntq_scale(),text_reveal(),project_color(),image_hover(),item_lines(),our_dream()}function sub_script(){let e=0;locoScroll.on("scroll",function(){locoScroll.scroll.instance.scroll.y>0&&locoScroll.scroll.instance.scroll.y>e?($("subnav").addClass("title-onScroll"),$("#title").addClass("text40"),$("#title").removeClass("text100 textoutline"),e=locoScroll.scroll.instance.scroll.y):(locoScroll.scroll.instance.scroll.y<=50&&locoScroll.scroll.instance.scroll.y<e&&($("subnav").removeClass("title-onScroll"),$("#title").removeClass("text40"),$("#title").addClass("text100 textoutline")),e=locoScroll.scroll.instance.scroll.y)}),gsap.utils.toArray(".detail-img").forEach(e=>{gsap.from(e,{y:"10vw",opacity:0,duration:1.5,ease:"customEase",stagger:.5,scrollTrigger:{scroller:"[data-scroll-container]",trigger:e,start:"top 98%",toggleActions:"restart none none reverse"}})});let t={x:window.innerWidth,y:window.innerHeight};gsap.utils.toArray(".zoom-img-container").forEach(e=>{let o=e.querySelector(".zoom-img");e.addEventListener("mouseenter",()=>{let r=Math.min(.8*t.x/o.width,.8*t.y/o.height);gsap.to(o,{scale:r,x:(t.x-o.width)/2-o.getBoundingClientRect().left,y:(t.y-o.height)/2-o.getBoundingClientRect().top,duration:.5,ease:"customEase"}),gsap.to(e,{zIndex:21,duration:.5,ease:"customEase"})}),e.addEventListener("mouseleave",()=>{gsap.to(o,{scale:1,x:0,y:0,duration:.5,ease:"customEase"}),gsap.to(e,{zIndex:0,duration:.5,ease:"customEase"})})});let o=document.querySelectorAll("#bottom-work .project-images img"),r={x:window.innerWidth/2,y:window.innerHeight/2},l={x:r.x,y:r.y},n=gsap.quickSetter(o,"x","px"),a=gsap.quickSetter(o,"y","px");window.addEventListener("mousemove",e=>{l.x=e.clientX-mrg,l.y=e.clientY+locoScroll.scroll.instance.scroll.y-bottomPos});var i=0,s=0;gsap.ticker.add(()=>{let e=1-Math.pow(.92,gsap.ticker.deltaRatio());r.x+=(l.x-r.x-i)*e,r.y+=(l.y-r.y-s)*e,n(r.x),a(r.y)}),gsap.utils.toArray("#bottom-work a").forEach(e=>{let{label:t}=e.dataset;e.addEventListener("mouseenter",()=>{i=$(`img[alt=${t}]`).width()/2,s=.85*$(`img[alt=${t}]`).height(),gsap.to(`img[alt=${t}]`,{opacity:1,scale:1}),gsap.set(`img[alt=${t}]`,{zIndex:4}),gsap.set(`a[data-label=${t}]`,{zIndex:5})}),e.addEventListener("mouseleave",()=>{gsap.to(`img[alt=${t}]`,{opacity:0,zIndex:-1,scale:.5}),gsap.set(`a[data-label=${t}]`,{zIndex:0})})})}
